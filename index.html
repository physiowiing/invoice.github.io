<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Invoice Form Styled as Bill</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-5">

    <div class="max-w-3xl mx-auto bg-white p-6 shadow-lg">

        <h1 class="text-center text-xl font-bold mb-6">Physiowiing Invoice Entry Form</h1>

        <div class="flex justify-between mb-6">
            <div>
                <label class="block font-semibold">Company Name</label>
                <input type="text" value="Physiowiing" class="w-full ray-100" />
                <div class="mt-2">
                    <label class="block font-semibold">Address</label>
                    <input type="text" value="3-E-4, Mahaveer Nagar 3rd"
                        class="w-full ray-100" />
                    <input type="text" value="Kota, Rajasthan" 
                        class="w-full  mt-1" />
                    <input type="text" value="324005"  class="w-full  mt-1" />
                    <input type="text" value="7734068883" class="w-full  mt-1" />
                </div>
            </div>

            <div>
                <label class="block font-semibold">Invoice Number</label>
                <input type="text" id="invoiceNumber" class="w-full border p-2 rounded" required readonly />
                <script>
                    window.addEventListener('DOMContentLoaded', () => {
                        const randomNum = Math.floor(Math.random() * 1000); // Random number between 0 and 999
                        const formattedNum = String(randomNum).padStart(4, '0'); // Always 4 digits with leading zeros
                        const formattedInvoiceNumber = 'INV' + formattedNum; // Example: INV0723
                        document.getElementById('invoiceNumber').value = formattedInvoiceNumber;
                    });
                </script>



                <label class="block font-semibold mt-4">Date</label>
                <input type="date" id="invoiceDate" class="w-full border p-2 rounded" required />

                <label class="block font-semibold mt-4">Balance</label>
                <input type="number" id="balanceDue" class="w-full border p-2 rounded" disabled placeholder="Auto Update" />
            </div>
        </div>

        <hr class="border-gray-300 mb-6" />

        <div>
            <h2 class="font-bold text-lg mb-2">Bill To</h2>
            <input type="text" id="billName" class="w-full border p-2 rounded mb-2" placeholder="Shoyab Mansoori"
                required />
            <input type="text" id="billAddress" class="w-full border p-2 rounded mb-2"
                placeholder="344, Shoyab, Prem Nagar 1" required />
            <input type="text" id="billCity" class="w-full border p-2 rounded mb-2" placeholder="Kota" required />
            <input type="text" id="billPincode" class="w-full border p-2 rounded mb-2" placeholder="324005" required />
            <input type="text" id="billPhone" class="w-full border p-2 rounded mb-2" placeholder="8003033071"
                required />
        </div>

        <hr class="border-black my-6" />

        <div>
            <h2 class="font-bold text-lg mb-4">Invoice Items</h2>

            <div class="grid grid-cols-4 gap-4 items-center mb-4">
                <div><label class="font-semibold">Description</label></div>
                <div><label class="font-semibold">Rate (₹)</label></div>
                <div><label class="font-semibold">Qty</label></div>
                <div><label class="font-semibold">Amount (₹)</label></div>
            </div>

            <div class="grid grid-cols-4 gap-4 items-center mb-4">
                <input type="text" id="consultationDesc" value="Consultation Fee" class="border p-2 rounded" required />
                <input type="number" id="consultationRate" value="300" class="border p-2 rounded" required />
                <input type="number" id="consultationQty" value="1" class="border p-2 rounded" required />
                <input type="number" id="consultationAmount" class="border p-2 rounded bg-gray-100" readonly />
            </div>

            <div class="grid grid-cols-4 gap-4 items-center mb-4">
                <input type="text" id="physiotherapyDesc" value="Physiotherapy (10 Days)" class="border p-2 rounded"
                    disabled/>
                <input type="number" id="physiotherapyRate" value="400" class="border p-2 rounded" required />
                <input type="number" id="physiotherapyQty" value="10" class="border p-2 rounded" required />
                <input type="number" id="physiotherapyAmount" class="border p-2 rounded bg-gray-100" readonly />
            </div>
        </div>

        <hr class="border-gray-300 my-6" />

        <div class="text-right">
            <label class="font-semibold">Total (₹)</label>
            <input type="number" id="totalAmount" class="w-48 border p-2 rounded bg-gray-100" readonly />
        </div>

        <button type="button" onclick="previewInvoice()" class="bg-blue-500 text-white p-2 rounded w-full mt-6">Preview
            Invoice PDF</button>

    </div>
    <script>
        function calculateAmounts() {
            const consultationRate = parseFloat(document.getElementById('consultationRate').value);
            const consultationQty = parseInt(document.getElementById('consultationQty').value);
            const consultationAmount = consultationRate * consultationQty;

            const physiotherapyRate = parseFloat(document.getElementById('physiotherapyRate').value);
            const physiotherapyQty = parseInt(document.getElementById('physiotherapyQty').value);
            const physiotherapyAmount = physiotherapyRate * physiotherapyQty;

            document.getElementById('consultationAmount').value = consultationAmount.toFixed(2);
            document.getElementById('physiotherapyAmount').value = physiotherapyAmount.toFixed(2);

            document.getElementById('totalAmount').value = (consultationAmount + physiotherapyAmount).toFixed(2);
        }

        // Update physiotherapyDesc when qty changes
        document.getElementById('physiotherapyQty').addEventListener('input', function () {
            const qty = parseInt(this.value) || 0;
            document.getElementById('physiotherapyDesc').value = `Physiotherapy (${qty} Days)`;
            calculateAmounts();
        });

        document.querySelectorAll('#consultationRate, #consultationQty, #physiotherapyRate').forEach(el => {
            el.addEventListener('input', calculateAmounts);
        });

        function previewInvoice() {
            calculateAmounts();

            const formData = {
                invoiceNumber: document.getElementById('invoiceNumber').value,
                invoiceDate: document.getElementById('invoiceDate').value,
                balanceDue: document.getElementById('balanceDue').value,
                billName: document.getElementById('billName').value,
                billAddress: document.getElementById('billAddress').value,
                billCity: document.getElementById('billCity').value,
                billPincode: document.getElementById('billPincode').value,
                billPhone: document.getElementById('billPhone').value,
                consultationDesc: document.getElementById('consultationDesc').value,
                consultationRate: document.getElementById('consultationRate').value,
                consultationQty: document.getElementById('consultationQty').value,
                consultationAmount: document.getElementById('consultationAmount').value,
                physiotherapyDesc: document.getElementById('physiotherapyDesc').value,
                physiotherapyRate: document.getElementById('physiotherapyRate').value,
                physiotherapyQty: document.getElementById('physiotherapyQty').value,
                physiotherapyAmount: document.getElementById('physiotherapyAmount').value,
                totalAmount: document.getElementById('totalAmount').value
            };

            localStorage.setItem('invoiceData', JSON.stringify(formData));
            window.location.href = 'preview.html';
        }

        // Initialize amounts on page load
        calculateAmounts();
    </script>
</body>

</html>